<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Salah ketik: seharusnya 'viewport' bukan 'viewpot' -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create GIS</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <style>
        #map { height: 500px; margin-bottom: 20px; }
        form {
            font-family: Arial, sans-serif;
            width: 300px;
            display: flex;
            flex-direction: column;
        }
        label { margin-top: 10px; }
        input, button { padding: 8px; margin-top: 5px; }
    </style>
</head>

<body>
<div id="map"></div>

<form id="createForm" action="create.php" method="post">
    <label for="name">University Name</label>
    <input type="text" id="name" name="name" required>

    <label for="address">Address</label>
    <input type="text" id="address" name="address" required>

    <label for="lat">Latitude</label>
    <input type="text" id="lat" name="lat" >

    <label for="lng">Longitude</label>
    <input type="text" id="lng" name="lng" >

    <button type="submit" name="submit">Create</button>
</form>

<script>
    // Inisialisasi peta
    var map = L.map('map').setView([-0.021320765594868805, 109.33935739472223], 15);

    // Tambahkan layer peta dari OpenStreetMap
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // Ambil elemen input
    var latInput = document.getElementById('lat');
    var lngInput = document.getElementById('lng');

    var marker;

    // Ketika peta diklik
    map.on('click', function(e) {
        var lat = e.latlng.lat;
        var lng = e.latlng.lng;

        // Jika marker sudah ada, hapus dulu
        if (marker) {
            map.removeLayer(marker);
        }

        // Tambahkan marker baru
        marker = L.marker([lat, lng]).addTo(map);

        // Isi nilai input latitude & longitude
        latInput.value = lat;
        lngInput.value = lng;
    });
</script>

</body>
</html>
